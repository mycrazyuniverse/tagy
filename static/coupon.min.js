function optin(){Array.from(document.querySelectorAll(".optin")).forEach(function(e){e.querySelector(".btn").addEventListener("click",function(t){var a=e.querySelector(".email-input").value;subscribe_to_newsletter(JSON.stringify({email:a})),t.preventDefault()})})}function subscribe_to_newsletter(e){var t=new XMLHttpRequest;t.open("POST",apiUrl+"/api/tagcity/v3/optin",!0),t.setRequestHeader("Content-Type","application/json"),t.send(e)}function left(){0!==offset&&(offset+=carouselWidth+cardMarginRight,carousel.style.transform="translateX(${offset}px)")}function right(){offset!==maxX&&(offset-=carouselWidth+cardMarginRight,carousel.style.transform="translateX(${offset}px)")}function closeMenu(){var e=document.querySelector(".nav-container"),t=document.querySelector(".app");addClass(document.querySelector(".mobile-menu-overlay"),"hide"),removeClass(e,"menu_opened"),removeClass(t,"menuopen")}function collapse(e,t){Array.from(document.querySelectorAll(e)).forEach(function(e){e.classList[fnmap[t]]("show")})}function parse_query_string(e){for(var t=e.split("&"),a={},o=0;o<t.length;o++){var l=t[o].split("="),n=decodeURIComponent(l[0]),s=decodeURIComponent(l[1]);if(void 0===a[n])a[n]=decodeURIComponent(s);else if("string"==typeof a[n]){var r=[a[n],decodeURIComponent(s)];a[n]=r}else a[n].push(decodeURIComponent(s))}return a}function addClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function hasClass(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function removeClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function toggleClass(e,t){console.log(e.classList)}function getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function thefinalcountdown(){var e=document.querySelectorAll(".timer"),t=(new Date).getTime();e.length&&e.forEach(function(e){var a=1e3*e.dataset.ends;a-t>=0?setInterval(function(){var t=(new Date).getTime(),o=a-t;if(o>=0){var l=Math.floor(o/864e5),n=Math.floor(o%864e5/36e5)+24*l,s=Math.floor(o%36e5/6e4),r=Math.floor(o%6e4/1e3);e.querySelector(".timer-hours").innerHTML=n+" :",e.querySelector(".timer-mins").innerHTML=("0"+s).slice(-2)+" :",e.querySelector(".timer-secs").innerHTML=("0"+r).slice(-2)}else e.innerHTML="The countdown is over!"},1e3):e.innerHTML="The countdown is over!"})}function closebtn(){Array.from(document.querySelectorAll(".dia-close")).forEach(function(e){e.addEventListener("click",function(e){addClass(dialog,"hide"),addClass(dialog,"dialog-hidden");var t=removeParam("open",window.location.href);finishedalteredURL=removeParam("open",t),window.history.pushState("",document.title,finishedalteredURL)},!1)})}function removeParam(e,t){var a=t.split("?")[0],o,l=[],n=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==n){l=n.split("&");for(var s=l.length-1;s>=0;s-=1)(o=l[s].split("=")[0])===e&&l.splice(s,1);a=a+"?"+l.join("&")}return a}function menuitems(){Array.from(document.querySelectorAll(".menu-items")).forEach(function(e){e.addEventListener("click",function(e){Array.from(document.querySelectorAll(".dropdown_menu")).forEach(function(e){})},!1)});var e=document.querySelectorAll(".m-toggle-switch");Array.prototype.forEach.call(e,function(e,t){e.addEventListener("click",function(e){addClass(e.target.parentNode,"m-toggle-on")},!1)}),document.querySelectorAll("#openmenu")[0].addEventListener("click",function(e){var t=document.querySelector(".app"),a=document.querySelector(".nav-container"),o=hasClass(t,"menuopen"),l=hasClass(a,"menu_opened");1==o?removeClass(t,"menuopen"):addClass(t,"menuopen"),1==l?(removeClass(a,"menu_opened"),addClass(mobilemenuoverlay,"hide")):(addClass(a,"menu_opened"),removeClass(mobilemenuoverlay,"hide"))},!1),document.querySelectorAll(".mobile-menu-overlay")[0].addEventListener("click",function(e){closeMenu()},!1)}function searchfield(){var e=document.querySelectorAll(".searchresults")[0];document.querySelectorAll("#navigation .close")[0].addEventListener("click",function(e){closeMenu()},!1),document.querySelectorAll(".searchfield")[0].addEventListener("input",function(t){document.querySelectorAll(".tagcitylogo")[0].src="https://media.tagcity.be/2019/03/search.svg?auto=compress%2Cformat&ixlib=php-1.2.1";var a=new XMLHttpRequest,o=apiUrl+"/api/tagcity/v3/search/"+t.currentTarget.value;a.open("GET",o,!0),a.onload=function(){if(a.status>=200&&a.status<400){var t=JSON.parse(a.responseText),o="";t.search.webshops.title&&(o+='<div class="searchresults-title">'+t.search.webshops.title+"</div>"),o+="<ul>",t.search.webshops.results.forEach(function(e){o+='<li class="searchresult">',o+='<a href="',o+=e.link,o+='" class="searchresult_link">',o+='<span class="logo">',o+='<img src="',o+=e.logo,o+='" height="40" class="float-left searchresult_thumb" />',o+="<span>",o+='<span class="searchresult_text"><strong>',o+=e.name,o+="</strong><br />",o+=e.count,o+=" acties",o+="</span>",o+="</a>",t.search.webshops.tags&&t.search.webshops.tags.forEach(function(e){o+='<ul class="tag-results">',o+='<li class="search-tag">',o+='<article data-logo="http://dev-tagcity.pantheonsite.io/wp-content/uploads/2019/02/webshop_logo.png" data-code="" id="tag110" class="tag tag-search tag-link tag-"><div class="tag-item"><div class="float-left"><div class="discount-box text-center"><span class="discount text-lg">-20%</span> <span class=" label uppercase">Korting</span></div></div> <div class="tag-info float-right"><div class="tag-content"><h3 class="tag-title"><a href="?open=110">Exclusief: 10% korting op de volledige website</a></h3><div id="details110" class="tag-desc">Toegevoegd 1 maart 2019<div></div></div></div></div></div></article>',o+="</li>",o+="</ul>"}),o+="</li>"}),t.search.categories.title&&(o+='<div class="searchresults-title">'+t.search.categories.title+"</div>"),o+="<ul>",t.search.categories.results.forEach(function(e){o+='<li class="searchresult">',o+='<a href="',o+=e.link,o+='" class="searchresult_link">',o+='<img src="',o+=e.logo,o+='" height="40" class="float-left searchresult_thumb" />',o+='<span class="searchresult_text"><strong>',o+=e.name,o+="</strong><br />",o+=e.count,o+=" acties",o+="</span>",o+="</a>",e.tags&&t.search.categories.tags.forEach(function(e){o+='<ul class="tag-results">',o+='<li class="search-tag">',o+='<article data-logo="http://dev-tagcity.pantheonsite.io/wp-content/uploads/2019/02/webshop_logo.png" data-code="" id="tag110" class="tag tag-search tag-link tag-"><div class="tag-item"><div class="float-left"><div class="discount-box text-center"><span class="discount text-lg">-20%</span> <span class=" label uppercase">Korting</span></div></div> <div class="tag-info float-right"><div class="tag-content"><h3 class="tag-title"><a href="?open=110">Exclusief: 10% korting op de volledige website</a></h3><div id="details110" class="tag-desc">Toegevoegd 1 maart 2019<div></div></div></div></div></div></article>',o+="</li>",o+="</ul>"}),o+="</li>"}),o+="</ul>",e.innerHTML=o}},a.onerror=function(){},a.send()},!1),document.querySelectorAll(".searchfield")[0].addEventListener("focus",function(t){document.querySelectorAll(".tagcitylogo")[0].src="https://media.tagcity.be/2019/03/search.svg?auto=compress%2Cformat&ixlib=php-1.2.1",removeClass(e,"hide"),removeClass(mobilemenuoverlay,"hide")},!1),document.querySelectorAll(".searchfield")[0].addEventListener("blur",function(t){document.querySelectorAll(".tagcitylogo")[0].src="https://media.tagcity.be/2019/03/tagcity.svg?auto=compress%2Cformat&ixlib=php-1.2.1",myVar=setTimeout(function(){addClass(e,"hide"),addClass(mobilemenuoverlay,"hide")},300)},!1)}function setupDialog(){if(dialog_id){var e=document.querySelectorAll("#tag"+dialog_id)[0];if(e)var t=JSON.parse(e.dataset.dialog);if("custom"==t.type)dialog.querySelector(".dialog-slot").innerHTML=parse(t.content);else{dialog.querySelector(".codal-code").addEventListener("click",function(e){const t=e.target.select()},!1),0==t.optin&&addClass(dialog.querySelector(".optin"),"hide");var a=t.logo;dialog.querySelectorAll(".logo-img").forEach(function(e){e.setAttribute("src",a)}),dialog.querySelector(".codal-btn").setAttribute("href",apiUrl+t.url),dialog.querySelector(".codal-title").textContent=t.title,dialog.querySelector(".codal-code").value=t.code,dialog.querySelector(".codal-btn").textContent=t.btn.content}removeClass(dialog,"hide"),removeClass(dialog,"dialog-hidden")}}var date=new Date,timestamp=Math.floor(Date.now()/1e3),dialog_id=getUrlParameter("open"),mobilemenuoverlay=document.querySelector(".mobile-menu-overlay"),dialog=document.querySelectorAll(".dialog")[0],langcode=document.documentElement.lang,lang=langcode.replace("-BE",""),apiUrl="https://dev-tagcity.pantheonsite.io",urlParams=new URLSearchParams(window.location.search);"nl"!=lang&&(apiUrl="https://dev-tagcity.pantheonsite.io/"+lang),document.addEventListener("DOMContentLoaded",function(){document.onreadystatechange=function(){if("complete"===document.readyState){date=new Date,timestamp=Math.floor(Date.now()/1e3),mobilemenuoverlay=document.querySelector(".mobile-menu-overlay"),dialog=document.querySelectorAll(".dialog")[0],langcode=document.documentElement.lang,lang=langcode.replace("-BE",""),apiUrl="https://dev-tagcity.pantheonsite.io","nl"!=lang&&(apiUrl="https://dev-tagcity.pantheonsite.io/"+lang),dialog=document.querySelectorAll(".dialog")[0],dialog_id=getUrlParameter("open");Array.from(document.querySelectorAll(".tag-dialog")).forEach(function(e){e.addEventListener("click",function(e){hasClass(e.target,"prevent")||(window.open("?open="+e.currentTarget.dataset.tagno),window.open(apiUrl+e.currentTarget.dataset.href,"_self"))})});const e=Array.from(document.querySelectorAll('[data-toggle="collapse"]'));window.addEventListener("click",function(t){const a=t.target;if(e.includes(a)){collapse(a.getAttribute("data-target"),"toggle"),hasClass(a,"open_collapse")?removeClass(a,"open_collapse"):addClass(a,"open_collapse")}},!1);var t=Array.from(document.querySelectorAll(".tag"));if(t){var a=!1;t.forEach(function(e){var t=e.getAttribute("data-ends-at"),a=t-timestamp;t&&a<0&&addClass(e,"expired")})}setupDialog(),thefinalcountdown(),closebtn(),menuitems(),searchfield(),optin()}}});var fnmap={toggle:"toggle",show:"add",hide:"remove"};