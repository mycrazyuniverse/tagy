function tagDialog(){tagwpop=Array.from(document.querySelectorAll(".tag-dialog")),tagwpop.forEach(function(e){e.addEventListener("click",function(e){hasClass(e.target,"prevent")||(window.open(e.currentTarget.dataset.response),window.open(basisUrl+e.currentTarget.dataset.href,"_self"))})})}function optin(){Array.from(document.querySelectorAll(".optin")).forEach(function(e){e.querySelector(".btn").addEventListener("click",function(t){var a=e.querySelector(".email-input").value,o=JSON.stringify({email:a}),l=new XMLHttpRequest;l.open("POST",apiUrl+"/api/tagcity/v3/optin",!0),l.setRequestHeader("Content-Type","application/json"),l.send(o),l.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);console.log(t),e.querySelector(".optinrespone").innerHTML=t.message}},t.preventDefault()})})}function subscribe_to_newsletter(e){}function initCarousel(){if(document.querySelector("[data-target='carousel']")){var e=document.querySelector("[data-target='carousel']"),t=e.querySelector("[data-target='card']"),a=document.querySelector("[data-action='slideLeft']"),o=document.querySelector("[data-action='slideRight']"),l=e.offsetWidth,s=t.offsetWidth,r=t.currentStyle||window.getComputedStyle(t),n=Number(r.marginRight.match(/\d+/g)[0]),i=e.querySelectorAll("[data-target='card']").length,c=Math.floor(l/s),d=!1,u=-(i/c*l+n*(i/c)-l-n);setInterval(function(){d||(offset<=u?(offset=0,e.style.transform="translateX("+offset+"px)"):offset!==u&&(offset-=l+n,e.style.transform="translateX("+offset+"px)"))},5e3),a.addEventListener("click",function(){offset!==u&&(offset-=l+n,e.style.transform="translateX("+offset+"px)"),d=!0}),o.addEventListener("click",function(){0!==offset&&(offset+=l+n,e.style.transform="translateX("+offset+"px)"),d=!0})}}function closeMenu(){var e=document.querySelector(".nav-container"),t=document.querySelector(".app");addClass(document.querySelector(".mobile-menu-overlay"),"hide"),removeClass(e,"menu_opened"),removeClass(t,"menuopen")}function collapse(e,t){Array.from(document.querySelectorAll(e)).forEach(function(e){e.classList[fnmap[t]]("show")})}function parse_query_string(e){for(var t=e.split("&"),a={},o=0;o<t.length;o++){var l=t[o].split("="),s=decodeURIComponent(l[0]),r=decodeURIComponent(l[1]);if(void 0===a[s])a[s]=decodeURIComponent(r);else if("string"==typeof a[s]){var n=[a[s],decodeURIComponent(r)];a[s]=n}else a[s].push(decodeURIComponent(r))}return a}function addClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function hasClass(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function removeClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function toggleClass(e,t){console.log(e.classList)}function getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function thefinalcountdown(){var e=document.querySelectorAll(".timer"),t=(new Date).getTime();e.length&&e.forEach(function(e){var a=1e3*e.dataset.ends;a-t>=0?setInterval(function(){var t=(new Date).getTime(),o=a-t;if(o>=0){var l=Math.floor(o/864e5),s=Math.floor(o%864e5/36e5)+24*l,r=Math.floor(o%36e5/6e4),n=Math.floor(o%6e4/1e3);e.querySelector(".timer-hours").innerHTML=s+" :",e.querySelector(".timer-mins").innerHTML=("0"+r).slice(-2)+" :",e.querySelector(".timer-secs").innerHTML=("0"+n).slice(-2)}else e.innerHTML="The countdown is over!"},1e3):e.innerHTML="The countdown is over!"})}function closebtn(){Array.from(document.querySelectorAll(".dia-close")).forEach(function(e){e.addEventListener("click",function(e){addClass(dialog,"hide"),addClass(dialog,"dialog-hidden");var t=removeParam("open",window.location.href);finishedalteredURL=removeParam("open",t),window.history.pushState("",document.title,finishedalteredURL)},!1)})}function removeParam(e,t){var a=t.split("?")[0],o,l=[],s=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==s){l=s.split("&");for(var r=l.length-1;r>=0;r-=1)(o=l[r].split("=")[0])===e&&l.splice(r,1);a=a+"?"+l.join("&")}return a}function menuitems(){Array.from(document.querySelectorAll(".menu-items")).forEach(function(e){e.addEventListener("click",function(e){Array.from(document.querySelectorAll(".dropdown_menu")).forEach(function(e){})},!1)});var e=document.querySelectorAll(".m-toggle-switch");Array.prototype.forEach.call(e,function(e,t){e.addEventListener("click",function(e){addClass(e.target.parentNode,"m-toggle-on")},!1)}),document.querySelectorAll("#openmenu")[0].addEventListener("click",function(e){var t=document.querySelector(".app"),a=document.querySelector(".nav-container"),o=hasClass(t,"menuopen"),l=hasClass(a,"menu_opened");1==o?removeClass(t,"menuopen"):addClass(t,"menuopen"),1==l?(removeClass(a,"menu_opened"),addClass(mobilemenuoverlay,"hide")):(addClass(a,"menu_opened"),removeClass(mobilemenuoverlay,"hide"))},!1),document.querySelectorAll(".mobile-menu-overlay")[0].addEventListener("click",function(e){closeMenu()},!1)}function searchfield(){var e=document.querySelectorAll(".searchresults")[0];document.querySelectorAll("#navigation .close")[0].addEventListener("click",function(e){closeMenu()},!1),document.getElementById("searchfield").onkeydown=function(t){var a=e.querySelectorAll(".searchresult a");"Enter"==t.key&&(a[spos-1].click(),t.preventDefault()),"ArrowUp"==t.key&&(0>=spos?spos=a.length:spos--,a.forEach(function(e){removeClass(e,"active-result")}),addClass(a[spos],"active-result")),"ArrowDown"==t.key&&(a.length<=spos?spos=0:spos++,a.forEach(function(e){removeClass(e,"active-result")}),addClass(a[spos-1],"active-result"))},document.querySelectorAll(".searchfield")[0].addEventListener("input",function(t){document.querySelectorAll(".tagcitylogo")[0].src="https://media.tagcity.be/2019/03/search.svg?auto=compress%2Cformat&ixlib=php-1.2.1",t.preventDefault();var a=new XMLHttpRequest,o=apiUrl+"/api/tagcity/v3/search/"+t.currentTarget.value;a.open("GET",o,!0),a.onload=function(){if(a.status>=200&&a.status<400){var t=JSON.parse(a.responseText),o="";spos=0,t.search.webshops.title&&(o+='<div class="searchresults-title">'+t.search.webshops.title+"</div>");var l=t.search.webshops.results;o+="<ul>",l.forEach(function(e){o+='<li class="searchresult">',o+='<a href="',o+=e.link,o+='" class="searchresult_link">',o+='<span class="logo">',o+='<img src="',o+=e.logo,o+='" height="40" class="float-left searchresult_thumb" />',o+="<span>",o+='<span class="searchresult_text"><strong>',o+=e.name,o+="</strong><br />",o+=e.count,o+=" acties",o+="</span>",o+="</a>",t.search.webshops.tags&&t.search.webshops.tags.forEach(function(e){o+='<ul class="tag-results">',o+='<li class="search-tag">',o+="<article data-dialog='",o+=JSON.stringify(e.dialog),o+="' ",o+="data-href='",o+=e.url,o+="' ",o+="data-tagno='",o+=e.id,o+="' ",o+="data-response='",o+="/shop/"+e.shop.slug+"?open="+e.id,o+="' ",o+=' id="tag110" class="tag tag-search tag-table tag-default tag-bg tag-dialog">',o+='<div class="discount-box center text-center discount-border tag-center text-center">',o+='<p class="discount-text ',o+=sizeclass(e.discount.value),o+='">',o+=e.discount.value,o+="</p>",o+='<p class="label label-default uppercase">',o+=e.discount.label,o+="</p>",o+="</div>",o+='<div class="tag-center text-left">',o+='<div class="tag-content">',o+='<h3 class="tag-title">',o+=e.post_title,o+="</h3>",o+='<div id="details110" class="tag-desc">',o+=returnProperties(e.properties),o+="</div>",o+="</div>",o+="</div>",o+="</div>",o+="</div>",o+="</article>",o+="</li>",o+="</ul>"}),o+="</li>"}),t.search.categories.title&&(o+='<div class="searchresults-title">'+t.search.categories.title+"</div>"),o+="<ul>",t.search.categories.results.forEach(function(e){o+='<li class="searchresult">',o+='<a href="',o+=e.link,o+='" class="searchresult_link">',o+='<img src="',o+=e.logo,o+='" height="40" class="float-left searchresult_thumb" />',o+='<span class="searchresult_text"><strong>',o+=e.name,o+="</strong><br />",o+=e.count,o+=" acties",o+="</span>",o+="</a>",e.tags&&t.search.categories.tags.forEach(function(e){o+='<ul class="tag-results">',o+='<li class="search-tag">',o+='<article data-code="" id="tag110" class="tag tag-search tag-link tag-dialog dib w100">',o+='<div class="tag-item float-left">',o+='<div class="discount-box text-center">',o+='<span class="discount text-lg">-20%</span>',o+='<span class=" label uppercase">Korting</span>',o+="</div>",o+="</div>",o+='<div class="tag-info float-left">',o+='<div class="tag-content">',o+='<h3 class="tag-title">',o+='<a href="?open=110">',o+="</a>",o+="</h3>",o+='<div id="details110" class="tag-desc">',o+=returnProperties(e.properties),o+="<div>",o+="</div>",o+="</div>",o+="</div>",o+="</div>",o+="</article>",o+="</li>",o+="</ul>"}),o+="</li>"}),o+="</ul>",e.innerHTML=o}tagDialog()},a.onerror=function(){},a.send()},!1),document.querySelectorAll(".searchfield")[0].addEventListener("focus",function(t){document.querySelectorAll(".tagcitylogo")[0].src="https://media.tagcity.be/2019/03/search.svg?auto=compress%2Cformat&ixlib=php-1.2.1",removeClass(e,"hide"),removeClass(mobilemenuoverlay,"hide")},!1),document.querySelectorAll(".searchfield")[0].addEventListener("blur",function(t){document.querySelectorAll(".tagcitylogo")[0].src="https://media.tagcity.be/2019/03/tagcity.svg?auto=compress%2Cformat&ixlib=php-1.2.1",myVar=setTimeout(function(){addClass(e,"hide"),addClass(mobilemenuoverlay,"hide")},300)},!1)}function sizeclass(e){var t=e.length,a="text";return"discount-text "+(a=t<=4?"text-lg":t<=6?"text-md":t<=8?"text-sm":t<=10?"text-xs":t<=12?"text-mini":t<=14?"text-micro":"text-nano")}function returnProperties(e){var t="";return t+='<ul class="tag-properties">',e&&(console.log(e),e.forEach(function(e){t+="<li>",t+='<span class="property">',t+='<i class="property-icon">',t+=e.logo,t+="</i>",t+='<em class="property-text">',t+=e.content,t+="</em>",t+="</span>",t+="</li>"})),t+="</ul>"}function setupDialog(){if(dialog_id){var e=document.querySelectorAll("#tag"+dialog_id)[0];if(e)var t=JSON.parse(e.dataset.dialog);if("custom"==t.type)dialog.querySelector(".dialog-slot").innerHTML=parse(t.content);else{dialog.querySelector(".codal-code").addEventListener("click",function(e){const t=e.target.select()},!1);var a=t.logo;dialog.querySelectorAll(".logo-img").forEach(function(e){e.setAttribute("src",a)}),dialog.querySelector(".codal-btn").setAttribute("href",apiUrl+t.url),dialog.querySelector(".codal-title").textContent=t.title,t.code?dialog.querySelector(".codal-code").value=t.code:addClass(dialog.querySelector(".codal-code"),"hide"),0==t.optin?addClass(dialog.querySelector(".optin"),"hide"):(dialog.querySelector(".optin-title").textContent=t.optin.title,dialog.querySelector(".optin-subtitle").textContent=t.optin.subtitle,dialog.querySelector(".optin-btn").value=t.optin.btn),dialog.querySelector(".codal-btn").textContent=t.btn.content}removeClass(dialog,"hide"),removeClass(dialog,"dialog-hidden")}}var date=new Date,timestamp=Math.floor(Date.now()/1e3),dialog_id=getUrlParameter("open"),mobilemenuoverlay=document.querySelector(".mobile-menu-overlay"),dialog=document.querySelectorAll(".dialog")[0],langcode=document.documentElement.lang,lang=langcode.replace("-BE",""),basisUrl="https://api.tagcity.be",apiUrl=basisUrl,urlParams=new URLSearchParams(window.location.search),tagwpop="",offset=0;"nl"!=lang&&(apiUrl=basisUrl+lang),document.addEventListener("DOMContentLoaded",function(){document.onreadystatechange=function(){function e(){dataLayer.push(arguments)}if("complete"===document.readyState){date=new Date,timestamp=Math.floor(Date.now()/1e3),mobilemenuoverlay=document.querySelector(".mobile-menu-overlay"),dialog=document.querySelectorAll(".dialog")[0],langcode=document.documentElement.lang,lang=langcode.replace("-BE",""),apiUrl="https://api.tagcity.be","nl"!=lang&&(apiUrl=basisUrl+lang),dialog=document.querySelectorAll(".dialog")[0],dialog_id=getUrlParameter("open");const t=Array.from(document.querySelectorAll('[data-toggle="collapse"]'));window.addEventListener("click",function(e){const a=e.target;if(t.includes(a)){collapse(a.getAttribute("data-target"),"toggle"),hasClass(a,"open_collapse")?removeClass(a,"open_collapse"):addClass(a,"open_collapse")}},!1);if(Array.from(document.querySelectorAll(".tag")))var a=!1;setupDialog(),tagDialog(),thefinalcountdown(),closebtn(),menuitems(),searchfield(),optin(),initCarousel(),window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","UA-60427126-1")}}});var fnmap={toggle:"toggle",show:"add",hide:"remove"},spos=0;